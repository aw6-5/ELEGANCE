<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ELEGANCE - Ù…ØªØ¬Ø± Ø§Ù„ÙØ³Ø§ØªÙŠÙ† Ø§Ù„ÙØ§Ø®Ø±</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&amp;family=Tajawal:wght@300;400;500;700&amp;display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; }
    * { font-family: 'Tajawal', sans-serif; }
    .font-display { font-family: 'Playfair Display', serif; }
    .gradient-bg { background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 50%, #0f2818 100%); }
    .card-hover { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(218, 165, 255, 0.2); }
    .btn-primary { background: linear-gradient(135deg, #daa5ff 0%, #b366ff 100%); transition: all 0.3s ease; }
    .btn-primary:hover { transform: scale(1.02); box-shadow: 0 8px 25px rgba(218, 165, 255, 0.4); }
    .fade-in { animation: fadeIn 0.6s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slideUp 0.5s ease-out; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(100px); } to { opacity: 1; transform: translateY(0); } }
    .modal-overlay { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px); }
    .dress-svg { width: 100%; height: 100%; object-fit: contain; }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-[#f5f3f8] overflow-auto">
  <div id="app" class="min-h-full w-full"><!-- Top Bar -->
   <div class="bg-gradient-to-r from-[#2d5a3d] to-[#1a472a] text-white py-2 px-4">
    <div class="max-w-7xl mx-auto flex justify-between items-center text-sm">
     <div class="flex items-center gap-2">
      <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24">
       <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" />
      </svg><span id="topPhoneDisplay">Ø§Ù„Ø·Ù„Ø¨Ø§Øª: +967770215380</span>
     </div>
     <div class="hidden md:flex items-center gap-4"><span>âœ¨ Ø£Ø³Ù„ÙˆØ¨ ÙØ§Ø®Ø±</span> <span>ğŸ‘— ØªØµØ§Ù…ÙŠÙ… Ø­ØµØ±ÙŠØ©</span>
     </div>
    </div>
   </div><!-- Header -->
   <header class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 py-4">
     <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
       <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#daa5ff] to-[#b366ff] flex items-center justify-center"><span class="text-xl">ğŸ‘—</span>
       </div>
       <div>
        <h1 id="shopNameDisplay" class="font-display text-2xl font-bold text-[#1a472a]">ELEGANCE</h1>
        <p class="text-xs text-[#6b5b95]">Ø£Ù†Ø§Ù‚Ø© Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯</p>
       </div>
      </div>
      <nav class="hidden lg:flex items-center gap-6"><button onclick="showPage('home')" class="nav-link text-gray-700 hover:text-[#daa5ff] transition-colors font-medium">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button> <button onclick="showPage('shop')" class="nav-link text-gray-700 hover:text-[#daa5ff] transition-colors font-medium">Ø§Ù„Ù…ØªØ¬Ø±</button> <button onclick="showPage('categories')" class="nav-link text-gray-700 hover:text-[#daa5ff] transition-colors font-medium">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</button> <button onclick="showPage('about')" class="nav-link text-gray-700 hover:text-[#daa5ff] transition-colors font-medium">Ù…Ù† Ù†Ø­Ù†</button> <button onclick="showPage('contact')" class="nav-link text-gray-700 hover:text-[#daa5ff] transition-colors font-medium">Ø§ØªØµÙ„ï¿½ï¿½ Ø¨Ù†Ø§</button>
      </nav>
      <div class="flex items-center gap-4"><button onclick="showPage('cart')" class="relative p-2 rounded-full bg-[#daa5ff]/20 hover:bg-[#daa5ff] hover:text-white transition-all">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg><span id="cartCount" class="absolute -top-1 -right-1 w-5 h-5 bg-[#daa5ff] text-white text-xs rounded-full flex items-center justify-center font-bold">0</span> </button> <button onclick="toggleMobileMenu()" class="lg:hidden p-2 rounded-lg hover:bg-[#daa5ff]/10 transition-colors">
        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg></button>
      </div>
     </div>
     <div id="mobileMenu" class="hidden lg:hidden mt-4 pb-4 border-t border-[#daa5ff]/20 pt-4">
      <div class="flex flex-col gap-3"><button onclick="showPage('home'); toggleMobileMenu()" class="text-right py-2 px-4 rounded-lg hover:bg-[#daa5ff]/10 text-gray-700 transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button> <button onclick="showPage('shop'); toggleMobileMenu()" class="text-right py-2 px-4 rounded-lg hover:bg-[#daa5ff]/10 text-gray-700 transition-colors">Ø§Ù„Ù…ØªØ¬Ø±</button> <button onclick="showPage('categories'); toggleMobileMenu()" class="text-right py-2 px-4 rounded-lg hover:bg-[#daa5ff]/10 text-gray-700 transition-colors">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</button> <button onclick="showPage('about'); toggleMobileMenu()" class="text-right py-2 px-4 rounded-lg hover:bg-[#daa5ff]/10 text-gray-700 transition-colors">Ù…Ù† Ù†Ø­Ù†</button> <button onclick="showPage('contact'); toggleMobileMenu()" class="text-right py-2 px-4 rounded-lg hover:bg-[#daa5ff]/10 text-gray-700 transition-colors">Ø§ØªØµÙ„ÙŠ Ø¨Ù†Ø§</button>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main id="mainContent" class="flex-1"><!-- HOME PAGE -->
    <div id="homePage" class="page">
     <section class="relative gradient-bg min-h-[500px] flex items-center">
      <div class="absolute inset-0 bg-gradient-to-l from-transparent via-white/10 to-white/30"></div>
      <div class="max-w-7xl mx-auto px-4 py-16 relative z-10">
       <div class="max-w-2xl fade-in">
        <div class="inline-block px-4 py-2 bg-white/90 rounded-full text-[#1a472a] text-sm font-medium mb-6">
         âœ¨ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ù†Ø§Ù‚Ø©
        </div>
        <h2 id="heroTitleDisplay" class="font-display text-4xl md:text-6xl font-bold text-white mb-6 leading-tight">Ø£Ù†Ø§Ù‚Ø©<br><span class="text-[#daa5ff]">Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯</span></h2>
        <p class="text-lg text-white/90 mb-8 leading-relaxed">Ø§ÙƒØªØ´ÙÙŠ Ø£Ø­Ø¯Ø« ØªØµØ§Ù…ÙŠÙ… Ø§Ù„ÙØ³Ø§ØªÙŠÙ† Ø§Ù„ÙØ§Ø®Ø±Ø© ÙˆØ§Ù„Ø­ØµØ±ÙŠØ©. Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù†ØªÙ‚Ø§Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù„ØªØ¹Ø¨Ø±ÙŠ Ø¹Ù† Ø£Ù†Ø§Ù‚ØªÙƒ Ø¨Ø«Ù‚Ø© ÙˆØ¬Ù…Ø§Ù„.</p>
        <div class="flex flex-wrap gap-4"><button onclick="showPage('shop')" class="btn-primary px-8 py-4 rounded-full text-[#1a472a] font-bold text-lg shadow-lg"> ØªØ³ÙˆÙ‚ÙŠ Ø§Ù„Ø¢Ù† â† </button> <a href="https://wa.me/967770215380?text=Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„ÙØ³Ø§ØªÙŠÙ†" target="_blank" rel="noopener noreferrer" class="px-8 py-4 rounded-full bg-white text-[#1a472a] font-bold text-lg shadow-lg hover:shadow-xl transition-all border-2 border-[#1a472a] flex items-center gap-2">
          <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24">
           <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" />
          </svg> ÙˆØ§ØªØ³Ø§Ø¨ </a>
        </div>
       </div>
      </div>
      <div class="absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-[#f5f3f8] to-transparent"></div>
      <div class="absolute top-10 left-10 w-20 h-20 rounded-full bg-[#daa5ff]/30 blur-2xl"></div>
      <div class="absolute bottom-20 right-20 w-32 h-32 rounded-full bg-[#b366ff]/20 blur-3xl"></div>
     </section><!-- Features -->
     <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4">
       <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div class="text-center p-6 rounded-2xl bg-[#daa5ff]/10 card-hover">
         <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#daa5ff] to-[#b366ff] flex items-center justify-center"><span class="text-3xl">ğŸšš</span>
         </div>
         <h3 class="font-bold text-lg text-gray-800 mb-2">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</h3>
         <p class="text-gray-600 text-sm">ØªÙˆØµÙŠÙ„ Ø¢Ù…Ù† ÙˆØ³Ø±ÙŠØ¹</p>
        </div>
        <div class="text-center p-6 rounded-2xl bg-[#b366ff]/10 card-hover">
         <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#b366ff] to-[#8b4dc7] flex items-center justify-center"><span class="text-3xl">ğŸ’¯</span>
         </div>
         <h3 class="font-bold text-lg text-gray-800 mb-2">Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©</h3>
         <p class="text-gray-600 text-sm">Ø£Ù‚Ù…Ø´Ø© ÙØ§Ø®Ø±Ø©</p>
        </div>
        <div class="text-center p-6 rounded-2xl bg-[#1a472a]/10 card-hover">
         <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#1a472a] to-[#2d5a3d] flex items-center justify-center"><span class="text-3xl">âœ¨</span>
         </div>
         <h3 class="font-bold text-lg text-gray-800 mb-2">ØªØµØ§Ù…ÙŠÙ… Ø­ØµØ±ÙŠØ©</h3>
         <p class="text-gray-600 text-sm">ØªØµØ§Ù…ÙŠÙ… ÙØ±ÙŠØ¯Ø©</p>
        </div>
        <div class="text-center p-6 rounded-2xl bg-[#daa5ff]/10 card-hover">
         <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#daa5ff] to-[#b366ff] flex items-center justify-center"><span class="text-3xl">ğŸ</span>
         </div>
         <h3 class="font-bold text-lg text-gray-800 mb-2">Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©</h3>
         <p class="text-gray-600 text-sm">Ø¯Ø¹Ù… 24/7</p>
        </div>
       </div>
      </div>
     </section><!-- Featured Products -->
     <section class="py-16 bg-[#f5f3f8]">
      <div class="max-w-7xl mx-auto px-4">
       <div class="text-center mb-12"><span class="inline-block px-4 py-2 bg-[#daa5ff]/20 text-[#1a472a] rounded-full text-sm font-medium mb-4">Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø©</span>
        <h2 class="font-display text-3xl md:text-4xl font-bold text-gray-800">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</h2>
       </div>
       <div id="featuredProducts" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
       <div class="text-center mt-10"><button onclick="showPage('shop')" class="btn-primary px-8 py-4 rounded-full text-[#1a472a] font-bold"> Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ³Ø§ØªÙŠÙ† </button>
       </div>
      </div>
     </section>
    </div><!-- SHOP PAGE -->
    <div id="shopPage" class="page hidden">
     <div class="max-w-7xl mx-auto px-4 py-8">
      <div class="flex items-center gap-2 text-sm text-gray-500 mb-6"><button onclick="showPage('home')" class="hover:text-[#daa5ff]">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button> <span>/</span> <span class="text-[#daa5ff]">Ø§Ù„Ù…ØªØ¬Ø±</span>
      </div>
      <div class="flex flex-col lg:flex-row gap-8">
       <aside class="lg:w-64 flex-shrink-0">
        <div class="bg-white rounded-2xl p-6 shadow-sm sticky top-24">
         <h3 class="font-bold text-lg text-gray-800 mb-4 flex items-center gap-2">
          <svg class="w-5 h-5 text-[#daa5ff]" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
          </svg> ØªØµÙÙŠØ©</h3>
         <div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø¨Ø­Ø«</label> <input type="text" id="searchInput" oninput="filterProducts()" placeholder="Ø§Ø¨Ø­ï¿½ï¿½ÙŠ Ø¹Ù† ÙØ³ØªØ§Ù†..." class="w-full px-4 py-2 rounded-lg border border-[#daa5ff]/30 focus:outline-none focus:border-[#daa5ff] transition-colors">
         </div>
         <div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ØªØµÙ†ÙŠÙ</label> <select id="categoryFilter" onchange="filterProducts()" class="w-full px-4 py-2 rounded-lg border border-[#daa5ff]/30 focus:outline-none focus:border-[#daa5ff] transition-colors"> <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option> </select>
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø³Ø¹Ø±</label> <select id="priceFilter" onchange="filterProducts()" class="w-full px-4 py-2 rounded-lg border border-[#daa5ff]/30 focus:outline-none focus:border-[#daa5ff] transition-colors"> <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</option> <option value="0-300">Ø£Ù‚Ù„ Ù…Ù† 300 SAR</option> <option value="300-500">300 - 500 SAR</option> <option value="500-800">500 - 800 SAR</option> <option value="800+">Ø£ÙƒØ«Ø± Ù…Ù† 800 SAR</option> </select>
         </div>
        </div>
       </aside>
       <div class="flex-1">
        <div class="flex items-center justify-between mb-6">
         <h2 class="font-display text-2xl font-bold text-gray-800">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ³Ø§ØªÙŠÙ†</h2><span id="productCount" class="text-sm text-gray-500">16 ÙØ³ØªØ§Ù†</span>
        </div>
        <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6"></div>
       </div>
      </div>
     </div>
    </div><!-- CART PAGE -->
    <div id="cartPage" class="page hidden">
     <div class="max-w-4xl mx-auto px-4 py-8">
      <div class="flex items-center gap-2 text-sm text-gray-500 mb-6"><button onclick="showPage('home')" class="hover:text-[#daa5ff]">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button> <span>/</span> <span class="text-[#daa5ff]">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</span>
      </div>
      <h2 class="font-display text-3xl font-bold text-gray-800 mb-8 flex items-center gap-3">
       <svg class="w-8 h-8 text-[#daa5ff]" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
       </svg> Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
      <div id="cartContent"></div>
     </div>
    </div>
   </main><!-- Footer -->
   <footer class="bg-[#1a472a] text-white mt-16">
    <div class="max-w-7xl mx-auto px-4 py-12">
     <div class="text-center">
      <p class="text-gray-400 text-sm">Â© 2024 ELEGANCE - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
     </div>
    </div>
   </footer><!-- Product Modal -->
   <div id="productModal" class="fixed inset-0 z-50 hidden">
    <div class="modal-overlay absolute inset-0" onclick="closeModal()"></div>
    <div class="absolute inset-4 md:inset-10 lg:inset-20 bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row slide-up max-h-[90vh] overflow-y-auto"><button onclick="closeModal()" class="absolute top-4 left-4 z-10 w-10 h-10 bg-white/90 rounded-full flex items-center justify-center shadow-lg hover:bg-[#daa5ff] hover:text-white transition-colors">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
     <div id="modalContent" class="flex-1 overflow-y-auto"></div>
    </div>
   </div><!-- Toast -->
   <div id="toast" class="fixed bottom-4 right-4 z-50 transform translate-y-20 opacity-0 transition-all duration-300">
    <div class="bg-gray-900 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3">
     <svg class="w-6 h-6 text-[#25D366]" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
     </svg><span id="toastMessage">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</span>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      shop_name: 'ELEGANCE',
      hero_title: 'Ø£Ù†Ø§Ù‚Ø© Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯',
      phone_number: '+967770215380'
    };

    let config = { ...defaultConfig };

    const products = [
      { id: 1, name: 'ÙØ³ØªØ§Ù† Ø³Ù‡Ø±Ø© ÙØ§Ø®Ø±', nameEn: 'Luxury Evening Dress', price: 450, category: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø³Ù‡Ø±Ø©', color: '#FFD700', image: 'https://images.unsplash.com/photo-1595777707802-221c3f2c3c5a?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø³Ù‡Ø±Ø© ÙØ§Ø®Ø± Ù…Ù† Ø£Ù‚Ù…Ø´Ø© Ø§Ù„Ø­Ø±ÙŠØ± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù…Ø¹ ØªØ·Ø±ÙŠØ²Ø§Øª Ø°Ù‡Ø¨ÙŠØ©' },
      { id: 2, name: 'ÙØ³ØªØ§Ù† ÙƒØ§Ø¬ÙˆØ§Ù„ Ø£Ù†ÙŠÙ‚', nameEn: 'Elegant Casual Dress', price: 280, category: 'ÙØ³Ø§ØªÙŠÙ† ÙƒØ§Ø¬ÙˆØ§Ù„', color: '#6B5BFF', image: 'https://images.unsplash.com/photo-1612336307429-8a88e8d08ee3?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† ÙƒØ§Ø¬ÙˆØ§Ù„ Ù…Ø±ÙŠØ­ ÙˆØ£Ù†ÙŠÙ‚ Ù„Ø§Ù„ØªÙ‚Ø§Ø¡Ø§Øª ÙŠÙˆÙ…ÙŠØ©' },
      { id: 3, name: 'ÙØ³ØªØ§Ù† Ø²ÙØ§Ù Ù…Ù„ÙƒÙŠ', nameEn: 'Royal Wedding Dress', price: 950, category: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø£ÙØ±Ø§Ø­', color: '#FFFFFF', image: 'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø²ÙØ§Ù Ù…Ù„ÙƒÙŠ Ø¨ØªØµÙ…ÙŠÙ… ÙØ±ÙŠØ¯ Ù…Ø¹ Ø§Ù„ÙƒØ±Ø³ØªØ§Ù„ ÙˆØ§Ù„Ø¤Ù„Ø¤' },
      { id: 4, name: 'ÙØ³ØªØ§Ù† Ø­ÙÙ„Ø© Ø´ÙŠÙƒ', nameEn: 'Chic Party Dress', price: 380, category: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø­ÙÙ„Ø§Øª', color: '#FF1493', image: 'https://images.unsplash.com/photo-1612336307429-8a88e8d08ee3?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø­ÙÙ„Ø© Ø´ÙŠÙƒ Ø¨ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ ÙˆØ£Ù„ÙˆØ§Ù† Ø¬Ø±ÙŠØ¦Ø©' },
      { id: 5, name: 'ÙØ³ØªØ§Ù† ØµÙŠÙÙŠ ÙØ±ÙŠØ´', nameEn: 'Fresh Summer Dress', price: 220, category: 'ÙØ³Ø§ØªÙŠÙ† ØµÙŠÙÙŠØ©', color: '#FFE4B5', image: 'https://images.unsplash.com/photo-1595777707802-221c3f2c3c5a?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† ØµÙŠÙÙŠ Ø®ÙÙŠÙ Ù…Ù† Ù‚Ù…Ø§Ø´ Ù‚Ø·Ù†ÙŠ Ø·Ø¨ÙŠØ¹ÙŠ' },
      { id: 6, name: 'ÙØ³ØªØ§Ù† Ø®Ø±ÙŠÙÙŠ Ø¯Ø§ÙØ¦', nameEn: 'Warm Fall Dress', price: 320, category: 'ÙØ³Ø§ØªÙŠÙ† Ø®Ø±ÙŠÙÙŠØ©', color: '#FF8C00', image: 'https://images.unsplash.com/photo-1609252925990-6b8b3585b403?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø®Ø±ÙŠÙÙŠ Ø¯Ø§ÙØ¦ Ù…Ù† Ø§Ù„ØµÙˆÙ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø§Ù„ÙØ§Ø®Ø±' },
      { id: 7, name: 'ÙØ³ØªØ§Ù† ÙƒÙˆÙƒØªÙŠÙ„ Ø£Ù†ÙŠÙ‚', nameEn: 'Elegant Cocktail Dress', price: 420, category: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø³Ù‡Ø±Ø©', color: '#1a1a1a', image: 'https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† ÙƒÙˆÙƒØªÙŠÙ„ Ø£Ù†ÙŠÙ‚ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø­ÙÙ„Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©' },
      { id: 8, name: 'ÙØ³ØªØ§Ù† ØªÙ‚Ù„ÙŠØ¯ÙŠ ÙØ§Ø®Ø±', nameEn: 'Luxury Traditional Dress', price: 550, category: 'ÙØ³Ø§ØªÙŠÙ† ØªÙ‚Ù„ÙŠØ¯ÙŠØ©', color: '#9370DB', image: 'https://images.unsplash.com/photo-1595777707802-221c3f2c3c5a?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† ØªÙ‚Ù„ÙŠØ¯ÙŠ ÙØ§Ø®Ø± Ø¨ØªØµØ§Ù…ÙŠÙ… Ù…Ø¹Ø§ØµØ±Ø©' },
      { id: 9, name: 'ÙØ³ØªØ§Ù† Ø´ÙŠÙÙˆÙ† Ù†Ø§Ø¹Ù…', nameEn: 'Soft Chiffon Dress', price: 340, category: 'ÙØ³Ø§ØªÙŠÙ† Ø´ÙŠÙÙˆÙ†', color: '#FFB6D9', image: 'https://images.unsplash.com/photo-1612336307429-8a88e8d08ee3?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ù…Ù† Ù‚Ù…Ø§Ø´ Ø§Ù„Ø´ÙŠÙÙˆÙ† Ø§Ù„Ù†Ø§Ø¹Ù… Ù…Ø¹ ØªØ·Ø±ÙŠØ²Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø©' },
      { id: 10, name: 'ÙØ³ØªØ§Ù† Ø±Ø³Ù…ÙŠ Ù…Ù‡ÙŠØ¨', nameEn: 'Formal Majestic Dress', price: 600, category: 'ÙØ³Ø§ØªÙŠÙ† Ø±Ø³Ù…ÙŠØ©', color: '#C0C0C0', image: 'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø±Ø³Ù…ÙŠ Ù…Ù‡ÙŠØ¨ Ù„Ø­ÙÙ„Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø®Ø§ØµØ©' },
      { id: 11, name: 'ÙØ³ØªØ§Ù† Ù…ÙŠØ¯ÙŠ Ø£Ù†ÙŠÙ‚', nameEn: 'Elegant Midi Dress', price: 300, category: 'ÙØ³Ø§ØªÙŠÙ† Ù…ÙŠØ¯ÙŠ', color: '#90EE90', image: 'https://images.unsplash.com/photo-1595777707802-221c3f2c3c5a?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ù…ÙŠØ¯ÙŠ Ø£Ù†ÙŠÙ‚ Ø¨Ø·ÙˆÙ„ Ù‚Ù…Ø§Ø´ Ù…ØªÙˆØ³Ø·' },
      { id: 12, name: 'ÙØ³ØªØ§Ù† Ù…Ø§ÙƒØ³ÙŠ Ø·ÙˆÙŠÙ„', nameEn: 'Long Maxi Dress', price: 420, category: 'ÙØ³Ø§ØªÙŠÙ† Ù…Ø§ÙƒØ³ÙŠ', color: '#000080', image: 'https://images.unsplash.com/photo-1612336307429-8a88e8d08ee3?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ù…Ø§ÙƒØ³ÙŠ Ø·ÙˆÙŠÙ„ Ø£Ù†ÙŠÙ‚ Ù…Ø¹ ÙØªØ­Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©' },
      { id: 13, name: 'ÙØ³ØªØ§Ù† Ø£Ø·ÙØ§Ù„ Ø±Ù‚ÙŠÙ‚', nameEn: 'Delicate Kids Dress', price: 180, category: 'ÙØ³Ø§ØªÙŠÙ† Ø£Ø·ÙØ§Ù„', color: '#FFB6D9', image: 'https://images.unsplash.com/photo-1609252925990-6b8b3585b403?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø£Ø·ÙØ§Ù„ Ø±Ù‚ÙŠÙ‚ Ø¨Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ©' },
      { id: 14, name: 'ÙØ³ØªØ§Ù† Ø­ÙˆØ§Ù…Ù„ Ù…Ø±ÙŠØ­', nameEn: 'Comfortable Maternity Dress', price: 350, category: 'ÙØ³Ø§ØªÙŠÙ† Ø­ÙˆØ§Ù…Ù„', color: '#E6E6FA', image: 'https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ø­ÙˆØ§Ù…Ù„ Ù…Ø±ÙŠØ­ ÙˆÙØ§Ø®Ø±' },
      { id: 15, name: 'ÙØ³ØªØ§Ù† Ù…Ø«ÙŠØ± ÙØ§Ø®Ø±', nameEn: 'Glamorous Dress', price: 480, category: 'ÙØ³Ø§ØªÙŠÙ† Ø³Ù‡Ø±Ø©', color: '#8B4513', image: 'https://images.unsplash.com/photo-1595777707802-221c3f2c3c5a?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† Ù…Ø«ÙŠØ± Ø¨ØªÙØ§ØµÙŠÙ„ ÙØ§Ø®Ø±Ø© ÙˆØªØµÙ…ÙŠÙ… Ø¬Ø±ÙŠØ¡' },
      { id: 16, name: 'ÙØ³ØªØ§Ù† ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø®Ø§Ù„Ø¯', nameEn: 'Timeless Classic Dress', price: 360, category: 'ÙØ³Ø§ØªÙŠÙ† ÙƒØ§Ø¬ÙˆØ§Ù„', color: '#F5DEB3', image: 'https://images.unsplash.com/photo-1612336307429-8a88e8d08ee3?w=500&h=600&fit=crop', desc: 'ÙØ³ØªØ§Ù† ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø®Ø§Ù„Ø¯ Ù„Ø§ ÙŠØªØ£Ø«Ø± Ø¨ØªÙ‚Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¶Ø©' }
    ];

    const categories = [
      { name: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø³Ù‡Ø±Ø©', emoji: 'âœ¨', color: '#daa5ff' },
      { name: 'ÙØ³Ø§ØªÙŠÙ† ÙƒØ§Ø¬ÙˆØ§Ù„', emoji: 'ğŸ‘—', color: '#b366ff' },
      { name: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø£ÙØ±Ø§Ø­', emoji: 'ğŸ’’', color: '#daa5ff' },
      { name: 'ÙØ³Ø§ØªÙŠÙ† Ø§Ù„Ø­ÙÙ„Ø§Øª', emoji: 'ğŸ‰', color: '#b366ff' }
    ];

    let cart = [];

    function generateDressSVG(color) {
      return `<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg" class="dress-svg">
        <defs>
          <linearGradient id="grad" x1="0%" y1="0%" x2="100%">
            <stop offset="0%" style="stop-color:${color};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${color};stop-opacity:0.8" />
          </linearGradient>
        </defs>
        <circle cx="100" cy="40" r="22" fill="#F4A460"/>
        <path d="M 75 65 Q 60 110 65 210 Q 100 230 135 210 Q 140 110 125 65 Z" fill="url(#grad)"/>
        <path d="M 75 65 L 50 85" stroke="${color}" stroke-width="2.5"/>
        <path d="M 125 65 L 150 85" stroke="${color}" stroke-width="2.5"/>
        <circle cx="85" cy="140" r="3" fill="#FFD700" opacity="0.8"/>
        <circle cx="115" cy="140" r="3" fill="#FFD700" opacity="0.8"/>
        <circle cx="100" cy="170" r="2" fill="#FFD700" opacity="0.8"/>
      </svg>`;
    }

    function createProductCard(product) {
      return `
        <div class="bg-white rounded-2xl shadow-sm overflow-hidden card-hover group">
          <div class="relative aspect-square bg-gradient-to-br from-[${product.color}]33 to-[${product.color}]11 flex items-center justify-center overflow-hidden p-4">
            <img src="${product.image}" alt="${product.name}" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='flex';" class="w-full h-full object-cover">
            <div class="absolute inset-0 flex items-center justify-center text-6xl hidden" style="display: none;">ğŸ‘—</div>
            <button onclick="openModal(${product.id})" class="absolute top-3 right-3 w-10 h-10 rounded-full bg-white shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#daa5ff] hover:text-white">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
              </svg>
            </button>
            <div class="absolute top-3 left-3 px-3 py-1 bg-[#daa5ff] text-white text-xs font-bold rounded-full">
              ${product.price} SAR
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-bold text-gray-800 mb-1 line-clamp-1">${product.name}</h3>
            <p class="text-xs text-gray-500 mb-3">${product.nameEn}</p>
            <button onclick="addToCart(${product.id})" class="w-full btn-primary py-2.5 rounded-xl text-[#1a472a] font-bold text-sm flex items-center justify-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
              </svg>
              Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
            </button>
          </div>
        </div>
      `;
    }

    function renderFeaturedProducts() {
      document.getElementById('featuredProducts').innerHTML = products.slice(0, 8).map(p => createProductCard(p)).join('');
    }

    function renderShopProducts(filteredProducts = products) {
      document.getElementById('productsGrid').innerHTML = filteredProducts.map(p => createProductCard(p)).join('');
      document.getElementById('productCount').textContent = `${filteredProducts.length} ÙØ³ØªØ§Ù†`;
    }

    function filterProducts() {
      const search = document.getElementById('searchInput').value.toLowerCase();
      const category = document.getElementById('categoryFilter').value;
      const price = document.getElementById('priceFilter').value;

      let filtered = products.filter(p => {
        const matchSearch = p.name.toLowerCase().includes(search) || p.nameEn.toLowerCase().includes(search);
        const matchCategory = !category || p.category === category;
        let matchPrice = true;
        
        if (price) {
          if (price === '0-300') matchPrice = p.price < 300;
          else if (price === '300-500') matchPrice = p.price >= 300 && p.price <= 500;
          else if (price === '500-800') matchPrice = p.price > 500 && p.price <= 800;
          else if (price === '800+') matchPrice = p.price > 800;
        }
        
        return matchSearch && matchCategory && matchPrice;
      });

      renderShopProducts(filtered);
    }

    function populateCategoryFilter() {
      const select = document.getElementById('categoryFilter');
      const uniqueCategories = [...new Set(products.map(p => p.category))];
      select.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>' + 
        uniqueCategories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
    }

    function openModal(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const phoneNumber = config.phone_number.replace(/[^0-9]/g, '');
      const modal = document.getElementById('productModal');
      const content = document.getElementById('modalContent');

      content.innerHTML = `
        <div class="flex flex-col md:flex-row h-full">
          <div class="md:w-1/2 aspect-square md:aspect-auto bg-gradient-to-br from-[${product.color}]30 to-[${product.color}]10 flex items-center justify-center p-8 overflow-hidden">
            ${generateDressSVG(product.color)}
          </div>
          <div class="md:w-1/2 p-8 flex flex-col">
            <div class="flex-1">
              <span class="inline-block px-3 py-1 bg-[#daa5ff]/20 text-[#1a472a] text-sm rounded-full mb-4">${product.category}</span>
              <h2 class="font-display text-3xl font-bold text-gray-800 mb-2">${product.name}</h2>
              <p class="text-gray-500 mb-4">${product.nameEn}</p>
              <p class="text-gray-600 leading-relaxed mb-6">${product.desc}</p>
              <div class="text-3xl font-bold text-[#daa5ff] mb-6">${product.price} SAR</div>
              
              <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                <div class="flex items-center gap-3">
                  <button onclick="decreaseModalQty()" class="w-10 h-10 rounded-full bg-[#daa5ff]/20 text-[#daa5ff] font-bold hover:bg-[#daa5ff] hover:text-white transition-colors">-</button>
                  <input type="number" id="modalQty" value="1" min="1" class="w-20 text-center py-2 rounded-lg border border-[#daa5ff]/30 focus:outline-none focus:border-[#daa5ff]">
                  <button onclick="increaseModalQty()" class="w-10 h-10 rounded-full bg-[#daa5ff]/20 text-[#daa5ff] font-bold hover:bg-[#daa5ff] hover:text-white transition-colors">+</button>
                </div>
              </div>
            </div>
            
            <div class="space-y-3">
              <button onclick="addToCartFromModal(${product.id})" class="w-full btn-primary py-4 rounded-xl text-[#1a472a] font-bold text-lg flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
                Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
              </button>
              <a href="https://wa.me/${phoneNumber}?text=${encodeURIComponent(`Ø£Ø±ØºØ¨ ï¿½ï¿½Ø·Ù„Ø¨ ${product.name} â€“ Ø§Ù„Ø³Ø¹Ø± ${product.price} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ`)}" target="_blank" rel="noopener noreferrer" class="w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 bg-[#25D366] text-white hover:bg-[#128C7E] transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/></svg>
                Ø§Ø·Ù„Ø¨ÙŠ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
              </a>
            </div>
          </div>
        </div>
      `;

      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      document.getElementById('productModal').classList.add('hidden');
      document.body.style.overflow = '';
    }

    function increaseModalQty() {
      const input = document.getElementById('modalQty');
      input.value = parseInt(input.value) + 1;
    }

    function decreaseModalQty() {
      const input = document.getElementById('modalQty');
      if (parseInt(input.value) > 1) {
        input.value = parseInt(input.value) - 1;
      }
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      updateCartCount();
      showToast('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‘—');
    }

    function addToCartFromModal(productId) {
      const product = products.find(p => p.id === productId);
      const quantity = parseInt(document.getElementById('modalQty').value) || 1;
      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) {
        existingItem.quantity += quantity;
      } else {
        cart.push({ ...product, quantity });
      }
      updateCartCount();
      closeModal();
      showToast('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‘—');
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cartCount').textContent = count;
    }

    function renderCart() {
      const container = document.getElementById('cartContent');
      
      if (cart.length === 0) {
        container.innerHTML = `
          <div class="text-center py-16">
            <div class="text-8xl mb-6">ğŸ›’</div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</h3>
            <p class="text-gray-500 mb-6">Ù„Ù… ØªÙ‚ÙˆÙ…ÙŠ Ø¨Ø¥Ø¶Ø§ÙØ© ï¿½ï¿½ÙŠ ÙØ³Ø§ØªÙŠÙ† Ø¨Ø¹Ø¯</p>
            <button onclick="showPage('shop')" class="btn-primary px-8 py-3 rounded-full text-[#1a472a] font-bold">
              ØªØµÙØ­ÙŠ Ø§Ù„ÙØ³Ø§ØªÙŠÙ†
            </button>
          </div>
        `;
        return;
      }

      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const phoneNumber = config.phone_number.replace(/[^0-9]/g, '');

      container.innerHTML = `
        <div class="bg-white rounded-2xl shadow-sm overflow-hidden mb-6">
          ${cart.map(item => `
            <div class="flex items-center gap-4 p-4 border-b border-[#daa5ff]/20 last:border-b-0">
              <div class="w-20 h-20 rounded-xl flex items-center justify-center flex-shrink-0 bg-gradient-to-br from-[${item.color}]30 to-[${item.color}]10 p-2 overflow-hidden">
                <img src="${item.image}" alt="${item.name}" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='flex';" class="w-full h-full object-cover">
                <div class="absolute inset-0 flex items-center justify-center text-2xl hidden" style="display: none;">ğŸ‘—</div>
              </div>
              <div class="flex-1 min-w-0">
                <h4 class="font-bold text-gray-800 truncate">${item.name}</h4>
                <p class="text-sm text-gray-500">${item.price} SAR</p>
              </div>
              <div class="flex items-center gap-2">
                <button onclick="updateCartQty(${item.id}, -1)" class="w-8 h-8 rounded-full bg-[#daa5ff]/20 text-[#daa5ff] font-bold hover:bg-[#daa5ff] hover:text-white transition-colors text-sm">-</button>
                <span class="w-8 text-center font-bold">${item.quantity}</span>
                <button onclick="updateCartQty(${item.id}, 1)" class="w-8 h-8 rounded-full bg-[#daa5ff]/20 text-[#daa5ff] font-bold hover:bg-[#daa5ff] hover:text-white transition-colors text-sm">+</button>
              </div>
              <div class="text-[#daa5ff] font-bold w-24 text-left">${item.price * item.quantity} SAR</div>
              <button onclick="removeFromCart(${item.id})" class="w-8 h-8 rounded-full hover:bg-red-100 text-red-500 flex items-center justify-center transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
              </button>
            </div>
          `).join('')}
        </div>
        
        <div class="bg-white rounded-2xl shadow-sm p-6">
          <div class="flex items-center justify-between mb-6">
            <span class="text-xl font-bold text-gray-800">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</span>
            <span class="text-3xl font-bold text-[#daa5ff]">${total} SAR</span>
          </div>
          
          <a href="https://wa.me/${phoneNumber}?text=${encodeURIComponent(generateWhatsAppMessage())}" target="_blank" rel="noopener noreferrer" class="w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 bg-[#25D366] text-white hover:bg-[#128C7E] transition-colors">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/></svg>
            Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
          </a>
          
          <button onclick="clearCart()" class="w-full mt-3 py-3 rounded-xl font-bold text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors">
            Ø¥ÙØ±Ø§Øº Ø§Ù„Ø³Ù„Ø©
          </button>
        </div>
      `;
    }

    function updateCartQty(productId, change) {
      const item = cart.find(i => i.id === productId);
      if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
          cart = cart.filter(i => i.id !== productId);
        }
        updateCartCount();
        renderCart();
      }
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      updateCartCount();
      renderCart();
      showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ³ØªØ§Ù† Ù…Ù† Ø§Ù„Ø³Ù„Ø©');
    }

    function clearCart() {
      cart = [];
      updateCartCount();
      renderCart();
      showToast('ØªÙ… Ø¥ÙØ±Ø§Øº Ø§Ù„Ø³Ù„Ø©');
    }

    function generateWhatsAppMessage() {
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      let message = `ğŸ‘— Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ${config.shop_name}\n\nğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
      
      cart.forEach((item, index) => {
        message += `${index + 1}. ${item.name}\n`;
        message += `   Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity} Ã— ${item.price} = ${item.price * item.quantity} SAR\n\n`;
      });
      
      message += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total} SAR\n\nØ´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±Ùƒ ${config.shop_name} âœ¨`;
      return message;
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.remove('translate-y-20', 'opacity-0');
      
      setTimeout(() => {
        toast.classList.add('translate-y-20', 'opacity-0');
      }, 3000);
    }

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
      document.getElementById(pageId + 'Page').classList.remove('hidden');
      
      if (pageId === 'cart') {
        renderCart();
      }
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function toggleMobileMenu() {
      document.getElementById('mobileMenu').classList.toggle('hidden');
    }

    function updateUIFromConfig() {
      document.getElementById('shopNameDisplay').textContent = config.shop_name || defaultConfig.shop_name;
      document.getElementById('heroTitleDisplay').innerHTML = (config.hero_title || defaultConfig.hero_title).replace(' ', '<br><span class="text-[#daa5ff]">') + '</span>';
      document.getElementById('topPhoneDisplay').textContent = `Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ${config.phone_number || defaultConfig.phone_number}`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...defaultConfig, ...newConfig };
          updateUIFromConfig();
        },
        mapToCapabilities: (cfg) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['shop_name', cfg.shop_name || defaultConfig.shop_name],
          ['hero_title', cfg.hero_title || defaultConfig.hero_title],
          ['phone_number', cfg.phone_number || defaultConfig.phone_number]
        ])
      });
    }

    renderFeaturedProducts();
    renderShopProducts();
    populateCategoryFilter();
    updateUIFromConfig();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cae5af0b4b94ec8',t:'MTc3MDU4NzU1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
